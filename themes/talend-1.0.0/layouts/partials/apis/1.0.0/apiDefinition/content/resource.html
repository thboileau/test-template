{{/*
	Copyright (C) 2010-2020 Talend Inc. - www.talend.com

	This source code is available under agreement available at
	https://github.com/Talend/api-portal-template/blob/main/LICENSE.md

	You should have received a copy of the agreement
	along with this program; if not, write to Talend SA
	9 rue Pages 92150 Suresnes, France
*/}}

{{ $itemsByJsonPath := .itemsByJsonPath -}}
{{ $idsByJsonPath := .idsByJsonPath -}}
{{ $apiDefinition := .apiDefinition -}}
{{ $resource := .resource -}}
{{ $etnResourceUrl := .etnResourceUrl -}}

{{ range $key,$operation := .resource.operations -}}
	{{ $id := index $idsByJsonPath (print "#/contract/operations/" $key ) -}}
	{{ partial "apis/1.0.0/apiDefinition/content/operation" (dict "itemsByJsonPath" $itemsByJsonPath "idsByJsonPath" $idsByJsonPath "apiDefinition" $apiDefinition "operation" $operation "path" $resource.path "pathVariables" $resource.pathVariables "resourceSecuredBy" $resource.securedBy "id" $id "$etnResourceUrl" $etnResourceUrl) -}}
{{ end -}}
